<%- include('../../partials/header.ejs') %>

<body id="top">
    <%- include('../../partials/navbar.ejs') %>
    <div class="container mt-3">
        <div class="card bg-secondary text-light m-2">
            <div class="card-header text-center">
                <h4>Atualizar artigo</h4>
            </div>
            <div class="card-body">
                <form action="/articles/edit" method="POST" enctype="multipart/form-data">
                    <label for="categoryTitle">Título do artigo</label>
                    <input required name="title" id="categoryTitle" type="text" class="form-control mb-2"
                        placeholder="Digite o título aqui" value="<%= articles.title %>" minlength="4" maxlength="40" />
                    <input type="hidden" name="id" value="<%= articles.id  %>">
                    <label for="categoryID">Categoria</label>
                    <select required name="category" id="categoryID" class="form-control mb-4">
                        <% categories.forEach(category =>{%>
                        <% if(category.id == articles.categoryId){%>
                        <option value="<%= category.id %>" selected><%= category.title %></option>
                        <% }else{ %>
                        <option value="<%= category.id %>"><%= category.title %></option>
                        <% } %>
                        <% }) %>
                    </select>
                    <label for="sinopse">Sinopse do artigo</label>
                    <input type="text" name="sinopse" class="form-control" id="sinopse" required
                        placeholder="Escreva a sinopse aqui" value="<%= articles.sinopse %>" minlength="4"
                        maxlength="100">
                    <label for="thumbnail">Imagem de Thumb</label>
                    <div class="embed-responsive">
                        <div class="custom-file">
                            <input type="file" name="imageThumb" class="custom-file-input" id="thumbnail"
                                aria-describedby="Thumbnail" aria-describedby="thumbnail" accept="image/png, image/jpeg"
                                multiple value="C:\\users\\Wene Alves\\Documents\estudo\Programacao\\fullstack\\_github-respositorios-project\\blog-complete\\public\\uploads\\<%= articles.thumbnail %>"/>
                            <label class="custom-file-label" for="thumbnail">Escolher uma imagem</label>
                        </div>
                        <button class="btn btn-info mt-3 mb-3" type="button" data-toggle="modal"
                            data-target="#thumbnailImage">Ver a imagem</button>
                        <!-- Modal -->
                        <div class="modal fade" id="thumbnailImage" tabindex="-1" role="dialog"
                            aria-labelledby="titleThumb" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title text-dark" id="titleThumb">Thumbnail do post</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body mx-auto">
                                        <img id="uploadImage" class="card-img-right flex-auto d-lg-block"
                                            data-src="holder.js/200x250?theme=thumb" alt="Card image cap"
                                            src="../../../uploads/<%= articles.thumbnail %>" width="200" height="250" />
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-dismiss="modal">Fechar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <label for="article">Artigo</label>
                    <textarea name="body" id="article" class="form-control" placeholder="Escreva o contéudo aqui"
                        rows="30"><%= articles.body %></textarea>
                    <button type="submit" class="btn btn-success mt-2">Atualizar</button>
                </form>
            </div>
        </div>
    </div>
    <%- include('../../partials/homefooter.ejs') %>
</body>
<%- include('../../partials/footer.ejs') %>